ID,Epic,Title,Description,AcceptanceCriteria,DoD,Files,Tests,PR
N30-01,Throughput,Incremental re-parse & delta writes,"“Hash each PDF page / HTML file and only re-parse changed parts; preserve chunk IDs for unchanged pieces; update manifest with deltas.”","“Re-ingest same doc changes only the edited subset; manifest.json lists added/removed/changed parts; chunk IDs stable for unchanged parts.”","“Implement per-part hashing + delta planner; pipeline skips unchanged; update derived writer + manifest; docs added.”",worker/pipeline/incremental.py; worker/derived_writer.py; core/hash.py,tests/test_incremental_parse.py,[N30-01] Incremental re-parse & delta writes
N30-02,Throughput,OCR performance & caching,"“Cache OCR by (doc_id, page_hash, langs, dpi); batch pages; route to ocr queue with capped concurrency.”","“≥40% OCR wall-clock reduction on mixed PDFs; cache hits recorded; metrics exposed.”","“OCR cache writer/reader; Celery queue+concurrency; batch fan-out; metrics + docs.”",worker/ocr/cache.py; worker/celery_app.py; docker-compose.yml,tests/test_ocr_cache.py,[N30-02] OCR performance & caching
N30-03,Dataset Quality,Near-duplicate detection (doc & chunk),"“MinHash/SimHash dedupe for docs; LSH for chunk-level near-dupes at export time (toggle).”","“Exporter can drop near-dupes with a flag and reports drop stats in manifest.”","“Implement signatures+LSH; exporter option; manifest stats; docs.”",core/dedupe.py; exporters/common.py,tests/test_dedupe.py,[N30-03] Near-duplicate detection
N30-04,Curation,Active learning (uncertainty queue),"“Rank chunks by low coverage/conflicts/low OCR conf; endpoint returns prioritized IDs.”","“GET /curation/next?project_id=... returns stable priority list with reasons.”","“Scorer; API route; docs; LS pull script stub.”",core/active_learning.py; api/main.py,tests/test_active_learning_queue.py,[N30-04] Active learning queue
N30-05,Curation,IAA & conflict surfacing,"“Compute Cohen’s κ for fields with multiple annotators; flag disagreements.”","“IAA in /documents/{id}/metrics; conflicts recorded in audits.”","“IAA calc; metrics wiring; docs.”",core/quality/iaa.py; api/main.py,tests/test_iaa_conflicts.py,[N30-05] IAA & conflicts
N30-06,Governance,Taxonomy evolution & migrations,"“Enum rename/map migrations; mark impacted chunks ‘stale’ until confirmed.”","“PATCH taxonomy with rename map migrates values; audit entry created; stale chunks counted.”","“Migration engine; API; docs.”",core/taxonomy_migrations.py; api/main.py,tests/test_taxonomy_migration.py,[N30-06] Taxonomy migrations
N30-07,Governance,PII detection & redaction (toggle),"“Regex/light NER for emails/phones/IDs; write redactions.jsonl; exporters can exclude.”","“Policy ‘block’ fails gate if PII remains; toggle in ProjectSettings.”","“Detectors; redaction writer; exporter toggle; docs.”",core/pii.py; exporters/common.py; api/schemas.py,tests/test_pii_redaction.py,[N30-07] PII detection & redaction
N30-08,Security,Multi-project tenancy hardening,"“Enforce project scoping on all endpoints; presigned URLs scoped; tests.”","“Cross-project access denied; audits include project_id.”","“Guards/middleware; tests; docs.”",core/security/project_scope.py; api/main.py; storage/object_store.py,tests/test_project_tenancy.py,[N30-08] Tenancy hardening
N30-09,Exports,HuggingFace/Parquet exporters,"“Add Parquet + HF DatasetDict bundle; support presets rag/sft; deterministic hashes.”","“Presigned artifact links; manifest includes format + hash; large-file friendly.”","“Parquet writer; HF bundler; docs.”",exporters/parquet_writer.py; exporters/hf_bundle.py,tests/test_export_parquet_hf.py,[N30-09] HF/Parquet exporters
N30-10,Exports,Balanced/stratified splits,"“Stratify on fields (e.g., severity); doc-level grouping; seeded.”","“split={strategy: stratified, by:[...], seed} works; manifest shows split stats.”","“Splitter; exporter option; docs.”",exporters/splitter.py,tests/test_stratified_split.py,[N30-10] Stratified splits
N30-11,Parser,Tables v1 (texty),"“HTML: extract <table> → TSV; PDF: simple grid→rows/cols best-effort; emit kind=table_text.”","“Toggle via settings; tokens bounded; manifest counts tables.”","“Extractors; chunker integration; docs.”",parsers/html_tables.py; parsers/pdf_tables_v1.py,tests/test_tables_texty.py,[N30-11] Tables v1 (texty)
N30-12,Parser,Multilingual OCR & language tags,"“Detect language per page/file; Tesseract langs from settings; record langs_used.”","“Coverage improves on non-English pages; manifest shows per-page lang + OCR langs.”","“Lang detector; OCR config; docs.”",core/lang_detect.py; worker/ocr/config.py,tests/test_multilingual_ocr.py,[N30-12] Multilingual OCR & lang tags
N30-13,Observability,Metrics & dashboards,"“Prometheus metrics for pipeline stages, OCR hit ratio, dedupe/drop %, completeness/gates; Grafana dashboard JSON.”","“/metrics endpoint exposes gauges; dashboard JSON checked-in; docs.”","“Prom client; FastAPI /metrics; Grafana config.”",ops/metrics.py; api/metrics.py; ops/grafana/dashboard.json,tests/test_metrics_export.py,[N30-13] Metrics & dashboards
