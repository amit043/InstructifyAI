ID,Epic,Title,Description,AcceptanceCriteria,DoD,Files,Tests,PR
E4-01,"E4 Taxonomy, Guidelines & Curation (LS-first)",Taxonomy service v1 (versioned),"CRUD per-project taxonomy with version auto-increment; validate field types (enum,string,bool,number,date), required flag, helptext, examples; unique field names.","API: GET/PUT /projects/{id}/taxonomy; version increments on PUT; 400 on invalid schema; 409 on duplicate field names; Alembic migration adds table with unique(project_id,version).",Contracts (Pydantic/Alembic/OpenAPI) updated; unit tests for create v1→v2 and fetch latest/by-version; docs updated; lint/tests green.,api/schemas.py; api/main.py; models/taxonomy.py; migrations/*.py,tests/test_taxonomy.py,[E4-01] Taxonomy service v1
E4-02,"E4 Taxonomy, Guidelines & Curation (LS-first)",Labeling guidelines endpoint,Expose helptext and examples from the active taxonomy for curator training.,GET /projects/{id}/taxonomy/guidelines returns a rendered summary (JSON and text).,Docs + unit test; green CI.,api/main.py,tests/test_guidelines.py,[E4-02] Guidelines endpoint
E4-03,"E4 Taxonomy, Guidelines & Curation (LS-first)",Label Studio config generator,Generate LS XML config from active taxonomy; textarea for string; choices for enum; include helptext/examples.,POST /label-studio/config?project_id=… returns XML; 400 if no taxonomy.,Snapshot test on XML; example in README.,api/main.py; label_studio/config.py,tests/test_ls_config.py,[E4-03] LS config generator
E4-04,"E4 Taxonomy, Guidelines & Curation (LS-first)",LS webhook → metadata patch + audit,"Receive LS webhook; merge metadata into chunk.meta; bump rev; write Audit(before,after,user,request_id). Idempotent.",POST /webhooks/label-studio 200 OK; chunk metadata updated; audit row present; 403 without curator role.,Unit tests for idempotency and audit write.,api/main.py; models/audit.py,tests/test_ls_webhook.py,[E4-04] LS webhook
E4-05,"E4 Taxonomy, Guidelines & Curation (LS-first)",Bulk metadata apply,Apply metadata patch to selection (doc_id + range/filter) atomically; audit each chunk.,POST /chunks/bulk-apply returns updated count; verifies transactionality.,Unit tests covering partial failures.,api/main.py; services/bulk_apply.py,tests/test_bulk_apply.py,[E4-05] Bulk apply
E5-01,E5 Exports & Reproducibility,Template DSL (Jinja2),Render instruction/input/output/label/meta from chunk/doc context via Jinja2 with safe sandbox and helpers.,"Templates can call helpers join_section_path, iso8601; invalid template → 400.",Unit tests for templates; examples committed.,exporters/templates.py; exporters/helpers.py,tests/test_templates.py,[E5-01] Template DSL
E5-02,E5 Exports & Reproducibility,JSONL/CSV exporters + manifest,"Materialize export under /exports/{export_id}/… with manifest.json capturing lineage (taxonomy_version, template_hash, parser_commit, suggestors_commit, filters); generate presigned URL; idempotent via content hash.","POST /export/jsonl and /export/csv return {export_id,url}; re-running with same inputs reuses prior artifact.",Integration tests; signed URL verified.,exporters/jsonl.py; exporters/csv.py; storage/object_store.py,tests/test_exporters.py,[E5-02] Exporters + manifest
E5-03,E5 Exports & Reproducibility,RAG preset,"Built-in preset producing {context,answer} with section path prefix; empty answer.",preset='rag' works for JSONL and CSV.,Preset test added.,exporters/presets.py,tests/test_rag_preset.py,[E5-03] RAG preset
E6-01,E6 Suggestions (Rules) & Quality Gates,Rule-based suggestors v1,"Detectors for severity, step_id, ticket_id, datetime; write suggestions only (no auto-apply). Respect project settings and MAX_SUGGESTIONS_PER_DOC.","After parse, suggestions appear under chunk.meta.suggestions with {value,confidence,rationale,span?}.",Unit tests per detector.,suggestors/rules.py; worker/pipeline.py,tests/test_suggestors.py,[E6-01] Rule suggestors
E6-02,E6 Suggestions (Rules) & Quality Gates,Accept suggestion (single/bulk),Endpoints to accept one suggestion or bulk accept for a field; move value into metadata; audit and clear suggestions.,POST /chunks/{id}/suggestions/{field}/accept and POST /chunks/accept-suggestions return status/accepted count.,Unit/integration tests.,api/main.py,tests/test_accept_suggestions.py,[E6-02] Accept suggestion
E6-03,E6 Suggestions (Rules) & Quality Gates,Curation completeness metric,Compute % chunks meeting required fields per active taxonomy; API to fetch per document.,GET /documents/{doc_id}/metrics returns {curation_completeness}.,Unit tests (with fixtures).,core/metrics.py; api/main.py,tests/test_completeness.py,[E6-03] Completeness metric
E6-04,E6 Suggestions (Rules) & Quality Gates,Quality gates,Mark needs_review if empty_chunk_ratio>0.10 OR html_section_path_coverage<0.90 OR curation_completeness<0.80.,Status updated after parse or metadata changes; surfaced in /documents.,Unit tests + e2e over golden set.,core/metrics.py; worker/main.py; api/main.py,tests/test_quality_gates.py,[E6-04] Quality gates
E7-01,"E7 Observability, Audits & Scorecard",Correlation IDs,Propagate X-Request-ID api→worker→audits/logs; JSON log formatter.,Audits include request_id; logs show it; tests for propagation.,core/correlation.py; worker/main.py; api/main.py,tests/test_request_id.py,[E7-01] Correlation IDs
E7-02,"E7 Observability, Audits & Scorecard",Audit API + CSV,Filterable audit list; CSV when Accept:text/csv; indexes for perf.,GET /audits?doc_id=… works; CSV streaming verified; DB index added.,api/main.py; models/audit.py; migrations/*.py,tests/test_audit_api.py,[E7-02] Audit API
E7-03,"E7 Observability, Audits & Scorecard",Scorecard CLI,Run on examples/golden; compute metrics and gate pass/fail; exit non-zero on failure.,`make scorecard` works in CI and locally.,scripts/scorecard.py; Makefile,tests/test_scorecard.py,[E7-03] Scorecard CLI
E9-01,E9 Security & Settings,JWT auth (viewer/curator),Use HS256 dev secret; role claim enforced by decorator; keep X-Role override in DEV only.,Protected endpoints return 403 without curator; README updated.,core/auth.py; api/deps.py; api/main.py,tests/test_auth.py,[E9-01] JWT RBAC
E9-02,E9 Security & Settings,Signed URL only,All object access via presigned GET; audit any direct bucket path usage.,Exporter returns only presigned URLs; tests assert no raw paths.,storage/object_store.py; exporters/*,tests/test_signed_urls.py,[E9-02] Signed URLs
E9-03,E9 Security & Settings,Project settings wiring,"Feature flags (use_rules_suggestor,use_mini_llm,max_suggestions_per_doc,suggestion_timeout_ms) respected by worker/exporters.",Toggling settings affects behavior without redeploy.,api/main.py; worker/main.py; core/settings.py,tests/test_project_settings.py,[E9-03] Project settings wiring
F1-01,F CI & DX,CI pipeline,GitHub Actions workflow runs lint/test/scorecard; caches pip; posts coverage badge.,.github/workflows/ci.yml present; passing on main.,,,[F1-01] CI pipeline
F2-01,F CI & DX,Postman pack + README,Commit Postman collection/environment; README quick-start (Windows/macOS) and demo steps.,Files under /docs/postman; README includes curl examples and make targets.,docs/postman/*; README.md,,[F2-01] Postman + README
